import"../markdown-viewer/markdown-viewer.js";import"../../text-editor/text-editor.js";class i extends HTMLElement{#e;#t;#i;#a=this.#o.bind(this);#s;#n;constructor(){super(),this.attachShadow({mode:"open"})}async connectedCallback(){this.shadowRoot.innerHTML=await fetch(import.meta.url.replace(".js",".html")).then(t=>t.text()),requestAnimationFrame(async()=>{this.#t=this.shadowRoot.querySelector("text-editor"),this.#t.addEventListener("change",this.#a),this.#i=this.shadowRoot.querySelector("markdown-viewer"),await crs.call("cssgrid","enable_resize",{element:this,options:{columns:[0]}}),await crs.call("component","notify_ready",{element:this})})}async disconnectedCallback(){await crs.call("cssgrid","disable_resize",{element:this}),this.#t.removeEventListener("change",this.#a),this.#t=null,this.#i=null,this.#e=null}async set_markdown(t,e=null){this.#t.value=t,await this.#i.set_markdown(t,e)}#r(){const t=setTimeout(()=>{clearTimeout(t),this.#h(),this.#s=!1},16)}async#o(t){this.#e!=t.detail&&(this.#e=t.detail,this.#n=performance.now(),this.#s!=!0&&(this.#s=!0,await this.#r()))}async#h(){requestAnimationFrame(()=>{this.#i.set_markdown(this.#e)})}}customElements.define("markdown-editor",i);
