import"./../filter-header/filter-header.js";class n extends crsbinding.classes.BindableElement{#t;#n;#e;#i;#s;#a;get shadowDom(){return!0}get html(){return import.meta.url.replace(".js",".html")}set options(t){this.#t=t}set point(t){this.#n=t}set context(t){this.#i=t}async connectedCallback(){await super.connectedCallback(),this.#e=this.click.bind(this),this.shadowRoot.addEventListener("click",this.#e),await crsbinding.translations.add({approved:"Approved"}),requestAnimationFrame(async()=>{const t=this.shadowRoot.querySelector(".popup");await this.#l(),await crs.call("fixed_layout","set",{element:t,point:this.#n,at:"right",anchor:"top"}),await crs.call("dom_interactive","enable_resize",{element:this.popup,resize_query:"#resize",options:{}})})}async disconnectedCallback(){this.removeEventListener("click",this.#e),this.#e=null,this.#t=null,this.#n=null,this.#i=null,this.#s=null,this.#a=null}#c(t){return this.#t.find(i=>i.id==t)}async#l(){const t=document.createDocumentFragment();for(const e of this.#t)e.title.trim()=="-"?t.appendChild(document.createElement("hr")):await crs.call("dom","create_element",{parent:t,id:e.id,tag_name:"li",dataset:{icon:e.icon,tags:e.tags||"",...e.dataset||{}},attributes:{role:"menuitem",...e.attributes||{}},styles:e.styles,text_content:e.title});this.container.innerHTML="",this.container.appendChild(t),this.#i&&await crsbinding.staticInflationManager.inflateElements(this.container.children,this.#i)}async click(t){if(t.target.matches(".back"))return await this.close();if(t.target.nodeName!="LI")return;const e=this.#c(t.target.id);e.type!=null&&await crs.call(e.type,e.action,e.args),this.dataset.value=e.id,this.dispatchEvent(new CustomEvent("change",{detail:e.id})),await this.close()}async close(){await crs.call("context_menu","close")}async focus(){}}customElements.define("context-menu",n);
